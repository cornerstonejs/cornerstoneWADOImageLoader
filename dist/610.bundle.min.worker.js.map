{"version":3,"file":"610.bundle.min.worker.js","mappings":"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","sources":["webpack://cornerstoneWADOImageLoader/../codecs/jpegLossless.js"],"sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.jpeg = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\r\n  /*\r\n   * Copyright (C) 2015 Michael Martinez\r\n   * Changes: Added support for selection values 2-7, fixed minor bugs &\r\n   * warnings, split into multiple class files, and general clean up.\r\n   *\r\n   * 08-25-2015: Helmut Dersch agreed to a license change from LGPL to MIT.\r\n   */\r\n\r\n  /*\r\n   * Copyright (C) Helmut Dersch\r\n   *\r\n   * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n   * of this software and associated documentation files (the \"Software\"), to deal\r\n   * in the Software without restriction, including without limitation the rights\r\n   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n   * copies of the Software, and to permit persons to whom the Software is\r\n   * furnished to do so, subject to the following conditions:\r\n\r\n   * The above copyright notice and this permission notice shall be included in\r\n   * all copies or substantial portions of the Software.\r\n\r\n   * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n   * THE SOFTWARE.\r\n   */\r\n\r\n  /*jslint browser: true, node: true */\r\n  /*global require, module */\r\n\r\n  \"use strict\";\r\n\r\n  /*** Imports ***/\r\n  var jpeg = jpeg || {};\r\n  jpeg.lossless = jpeg.lossless || {};\r\n\r\n\r\n  /*** Constructor ***/\r\n  jpeg.lossless.ComponentSpec = jpeg.lossless.ComponentSpec || function () {\r\n      this.hSamp = 0; // Horizontal sampling factor\r\n      this.quantTableSel = 0; // Quantization table destination selector\r\n      this.vSamp = 0; // Vertical\r\n  };\r\n\r\n\r\n  /*** Exports ***/\r\n\r\n  var moduleType = typeof module;\r\n  if ((moduleType !== 'undefined') && module.exports) {\r\n      module.exports = jpeg.lossless.ComponentSpec;\r\n  }\r\n\r\n  },{}],2:[function(require,module,exports){\r\n  /*\r\n   * Copyright (C) 2015 Michael Martinez\r\n   * Changes: Added support for selection values 2-7, fixed minor bugs &\r\n   * warnings, split into multiple class files, and general clean up.\r\n   *\r\n   * 08-25-2015: Helmut Dersch agreed to a license change from LGPL to MIT.\r\n   */\r\n\r\n  /*\r\n   * Copyright (C) Helmut Dersch\r\n   *\r\n   * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n   * of this software and associated documentation files (the \"Software\"), to deal\r\n   * in the Software without restriction, including without limitation the rights\r\n   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n   * copies of the Software, and to permit persons to whom the Software is\r\n   * furnished to do so, subject to the following conditions:\r\n\r\n   * The above copyright notice and this permission notice shall be included in\r\n   * all copies or substantial portions of the Software.\r\n\r\n   * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n   * THE SOFTWARE.\r\n   */\r\n\r\n  /*jslint browser: true, node: true */\r\n  /*global require, module */\r\n\r\n  \"use strict\";\r\n\r\n  /*** Imports ***/\r\n  var jpeg = jpeg || {};\r\n  jpeg.lossless = jpeg.lossless || {};\r\n\r\n\r\n  /*** Constructor ***/\r\n  jpeg.lossless.DataStream = jpeg.lossless.DataStream || function (data, offset, length) {\r\n      // Note: DataView is much slower than Int8Array\r\n      // this.buffer = new DataView(data, offset, length);\r\n      this.buffer = new Uint8Array(data, offset, length);\r\n      this.index = 0;\r\n  };\r\n\r\n\r\n\r\n  jpeg.lossless.DataStream.prototype.get16 = function () {\r\n      // var value = this.buffer.getUint16(this.index, false);\r\n      var value = (this.buffer[this.index] << 8) + this.buffer[this.index + 1]; // DataView is big-endian by default\r\n      this.index += 2;\r\n      return value;\r\n  };\r\n\r\n\r\n\r\n  jpeg.lossless.DataStream.prototype.get8 = function () {\r\n      // var value = this.buffer.getUint8(this.index);\r\n      var value = this.buffer[this.index];\r\n      this.index += 1;\r\n      return value;\r\n  };\r\n\r\n\r\n  /*** Exports ***/\r\n\r\n  var moduleType = typeof module;\r\n  if ((moduleType !== 'undefined') && module.exports) {\r\n      module.exports = jpeg.lossless.DataStream;\r\n  }\r\n\r\n  },{}],3:[function(require,module,exports){\r\n  /*\r\n   * Copyright (C) 2015 Michael Martinez\r\n   * Changes: Added support for selection values 2-7, fixed minor bugs &\r\n   * warnings, split into multiple class files, and general clean up.\r\n   *\r\n   * 08-25-2015: Helmut Dersch agreed to a license change from LGPL to MIT.\r\n   */\r\n\r\n  /*\r\n   * Copyright (C) Helmut Dersch\r\n   *\r\n   * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n   * of this software and associated documentation files (the \"Software\"), to deal\r\n   * in the Software without restriction, including without limitation the rights\r\n   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n   * copies of the Software, and to permit persons to whom the Software is\r\n   * furnished to do so, subject to the following conditions:\r\n\r\n   * The above copyright notice and this permission notice shall be included in\r\n   * all copies or substantial portions of the Software.\r\n\r\n   * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n   * THE SOFTWARE.\r\n   */\r\n\r\n  /*jslint browser: true, node: true */\r\n  /*global require, module */\r\n\r\n  \"use strict\";\r\n\r\n  /*** Imports ***/\r\n  var jpeg = jpeg || {};\r\n  jpeg.lossless = jpeg.lossless || {};\r\n  jpeg.lossless.DataStream = jpeg.lossless.DataStream || ((typeof require !== 'undefined') ? require('./data-stream.js') : null);\r\n  jpeg.lossless.HuffmanTable = jpeg.lossless.HuffmanTable || ((typeof require !== 'undefined') ? require('./huffman-table.js') : null);\r\n  jpeg.lossless.QuantizationTable = jpeg.lossless.QuantizationTable || ((typeof require !== 'undefined') ? require('./quantization-table.js') : null);\r\n  jpeg.lossless.ScanHeader = jpeg.lossless.ScanHeader || ((typeof require !== 'undefined') ? require('./scan-header.js') : null);\r\n  jpeg.lossless.FrameHeader = jpeg.lossless.FrameHeader || ((typeof require !== 'undefined') ? require('./frame-header.js') : null);\r\n  jpeg.lossless.Utils = jpeg.lossless.Utils || ((typeof require !== 'undefined') ? require('./utils.js') : null);\r\n\r\n\r\n  /*** Constructor ***/\r\n\r\n  /**\r\n   * The Decoder constructor.\r\n   * @property {number} xDim - size of x dimension\r\n   * @property {number} yDim - size of y dimension\r\n   * @property {number} numComp - number of components\r\n   * @property {number} numBytes - number of bytes per component\r\n   * @type {Function}\r\n   */\r\n  jpeg.lossless.Decoder = jpeg.lossless.Decoder || function (buffer, numBytes) {\r\n      this.buffer = buffer;\r\n      this.frame = new jpeg.lossless.FrameHeader();\r\n      this.huffTable = new jpeg.lossless.HuffmanTable();\r\n      this.quantTable = new jpeg.lossless.QuantizationTable();\r\n      this.scan = new jpeg.lossless.ScanHeader();\r\n      this.DU = jpeg.lossless.Utils.createArray(10, 4, 64); // at most 10 data units in a MCU, at most 4 data units in one component\r\n      this.HuffTab = jpeg.lossless.Utils.createArray(4, 2, 50 * 256);\r\n      this.IDCT_Source = [];\r\n      this.nBlock = []; // number of blocks in the i-th Comp in a scan\r\n      this.acTab = jpeg.lossless.Utils.createArray(10, 1); // ac HuffTab for the i-th Comp in a scan\r\n      this.dcTab = jpeg.lossless.Utils.createArray(10, 1); // dc HuffTab for the i-th Comp in a scan\r\n      this.qTab = jpeg.lossless.Utils.createArray(10, 1); // quantization table for the i-th Comp in a scan\r\n      this.marker = 0;\r\n      this.markerIndex = 0;\r\n      this.numComp = 0;\r\n      this.restartInterval = 0;\r\n      this.selection = 0;\r\n      this.xDim = 0;\r\n      this.yDim = 0;\r\n      this.xLoc = 0;\r\n      this.yLoc = 0;\r\n      this.numBytes = 0;\r\n      this.outputData = null;\r\n      this.restarting = false;\r\n      this.mask = 0;\r\n\r\n      if (typeof numBytes !== \"undefined\") {\r\n          this.numBytes = numBytes;\r\n      }\r\n  };\r\n\r\n\r\n  /*** Static Pseudo-constants ***/\r\n\r\n  jpeg.lossless.Decoder.IDCT_P = [0, 5, 40, 16, 45, 2, 7, 42, 21, 56, 8, 61, 18, 47, 1, 4, 41, 23, 58, 13, 32, 24, 37, 10, 63, 17, 44, 3, 6, 43, 20,\r\n      57, 15, 34, 29, 48, 53, 26, 39, 9, 60, 19, 46, 22, 59, 12, 33, 31, 50, 55, 25, 36, 11, 62, 14, 35, 28, 49, 52, 27, 38, 30, 51, 54];\r\n  jpeg.lossless.Decoder.TABLE = [0, 1, 5, 6, 14, 15, 27, 28, 2, 4, 7, 13, 16, 26, 29, 42, 3, 8, 12, 17, 25, 30, 41, 43, 9, 11, 18, 24, 31, 40, 44, 53,\r\n      10, 19, 23, 32, 39, 45, 52, 54, 20, 22, 33, 38, 46, 51, 55, 60, 21, 34, 37, 47, 50, 56, 59, 61, 35, 36, 48, 49, 57, 58, 62, 63];\r\n  jpeg.lossless.Decoder.MAX_HUFFMAN_SUBTREE = 50;\r\n  jpeg.lossless.Decoder.MSB = 0x80000000;\r\n  jpeg.lossless.Decoder.RESTART_MARKER_BEGIN = 0xFFD0;\r\n  jpeg.lossless.Decoder.RESTART_MARKER_END = 0xFFD7;\r\n\r\n  /*** Prototype Methods ***/\r\n\r\n  /**\r\n   * Returns decompressed data.\r\n   * @param {ArrayBuffer} buffer\r\n   * @param {number} [offset]\r\n   * @param {number} [length]\r\n   * @returns {ArrayBufer}\r\n   */\r\n  jpeg.lossless.Decoder.prototype.decompress = function (buffer, offset, length) {\r\n      return this.decode(buffer, offset, length).buffer;\r\n  };\r\n\r\n\r\n\r\n  jpeg.lossless.Decoder.prototype.decode = function (buffer, offset, length, numBytes) {\r\n      /*jslint bitwise: true */\r\n\r\n      var current, scanNum = 0, pred = [], i, compN, temp = [], index = [], mcuNum;\r\n\r\n      if (typeof buffer !== \"undefined\") {\r\n          this.buffer = buffer;\r\n      }\r\n\r\n      if (typeof numBytes !== \"undefined\") {\r\n          this.numBytes = numBytes;\r\n      }\r\n\r\n      this.stream = new jpeg.lossless.DataStream(this.buffer, offset, length);\r\n      this.buffer = null;\r\n\r\n      this.xLoc = 0;\r\n      this.yLoc = 0;\r\n      current = this.stream.get16();\r\n\r\n      if (current !== 0xFFD8) { // SOI\r\n          throw new Error(\"Not a JPEG file\");\r\n      }\r\n\r\n      current = this.stream.get16();\r\n\r\n      while ((((current >> 4) !== 0x0FFC) || (current === 0xFFC4))) { // SOF 0~15\r\n          switch (current) {\r\n              case 0xFFC4: // DHT\r\n                  this.huffTable.read(this.stream, this.HuffTab);\r\n                  break;\r\n              case 0xFFCC: // DAC\r\n                  throw new Error(\"Program doesn't support arithmetic coding. (format throw new IOException)\");\r\n              case 0xFFDB:\r\n                  this.quantTable.read(this.stream, jpeg.lossless.Decoder.TABLE);\r\n                  break;\r\n              case 0xFFDD:\r\n                  this.restartInterval = this.readNumber();\r\n                  break;\r\n              case 0xFFE0:\r\n              case 0xFFE1:\r\n              case 0xFFE2:\r\n              case 0xFFE3:\r\n              case 0xFFE4:\r\n              case 0xFFE5:\r\n              case 0xFFE6:\r\n              case 0xFFE7:\r\n              case 0xFFE8:\r\n              case 0xFFE9:\r\n              case 0xFFEA:\r\n              case 0xFFEB:\r\n              case 0xFFEC:\r\n              case 0xFFED:\r\n              case 0xFFEE:\r\n              case 0xFFEF:\r\n                  this.readApp();\r\n                  break;\r\n              case 0xFFFE:\r\n                  this.readComment();\r\n                  break;\r\n              default:\r\n                  if ((current >> 8) !== 0xFF) {\r\n                      throw new Error(\"ERROR: format throw new IOException! (decode)\");\r\n                  }\r\n          }\r\n\r\n          current = this.stream.get16();\r\n      }\r\n\r\n      if ((current < 0xFFC0) || (current > 0xFFC7)) {\r\n          throw new Error(\"ERROR: could not handle arithmetic code!\");\r\n      }\r\n\r\n      this.frame.read(this.stream);\r\n      current = this.stream.get16();\r\n\r\n      do {\r\n          while (current !== 0x0FFDA) { // SOS\r\n              switch (current) {\r\n                  case 0xFFC4: // DHT\r\n                      this.huffTable.read(this.stream, this.HuffTab);\r\n                      break;\r\n                  case 0xFFCC: // DAC\r\n                      throw new Error(\"Program doesn't support arithmetic coding. (format throw new IOException)\");\r\n                  case 0xFFDB:\r\n                      this.quantTable.read(this.stream, jpeg.lossless.Decoder.TABLE);\r\n                      break;\r\n                  case 0xFFDD:\r\n                      this.restartInterval = this.readNumber();\r\n                      break;\r\n                  case 0xFFE0:\r\n                  case 0xFFE1:\r\n                  case 0xFFE2:\r\n                  case 0xFFE3:\r\n                  case 0xFFE4:\r\n                  case 0xFFE5:\r\n                  case 0xFFE6:\r\n                  case 0xFFE7:\r\n                  case 0xFFE8:\r\n                  case 0xFFE9:\r\n                  case 0xFFEA:\r\n                  case 0xFFEB:\r\n                  case 0xFFEC:\r\n                  case 0xFFED:\r\n                  case 0xFFEE:\r\n                  case 0xFFEF:\r\n                      this.readApp();\r\n                      break;\r\n                  case 0xFFFE:\r\n                      this.readComment();\r\n                      break;\r\n                  default:\r\n                      if ((current >> 8) !== 0xFF) {\r\n                          throw new Error(\"ERROR: format throw new IOException! (Parser.decode)\");\r\n                      }\r\n              }\r\n\r\n              current = this.stream.get16();\r\n          }\r\n\r\n          this.precision = this.frame.precision;\r\n          this.components = this.frame.components;\r\n\r\n          if (!this.numBytes) {\r\n              this.numBytes = parseInt(Math.ceil(this.precision / 8));\r\n          }\r\n\r\n          if (this.numBytes == 1) {\r\n              this.mask = 0xFF;\r\n          } else {\r\n              this.mask = 0xFFFF;\r\n          }\r\n\r\n          this.scan.read(this.stream);\r\n          this.numComp = this.scan.numComp;\r\n          this.selection = this.scan.selection;\r\n\r\n          if (this.numBytes === 1) {\r\n              if (this.numComp === 3) {\r\n                  this.getter = this.getValueRGB;\r\n                  this.setter = this.setValueRGB;\r\n                  this.output = this.outputRGB;\r\n              } else {\r\n                  this.getter = this.getValue8;\r\n                  this.setter = this.setValue8;\r\n                  this.output = this.outputSingle;\r\n              }\r\n          } else {\r\n              this.getter = this.getValue16;\r\n              this.setter = this.setValue16;\r\n              this.output = this.outputSingle;\r\n          }\r\n\r\n          switch (this.selection) {\r\n              case 2:\r\n                  this.selector = this.select2;\r\n                  break;\r\n              case 3:\r\n                  this.selector = this.select3;\r\n                  break;\r\n              case 4:\r\n                  this.selector = this.select4;\r\n                  break;\r\n              case 5:\r\n                  this.selector = this.select5;\r\n                  break;\r\n              case 6:\r\n                  this.selector = this.select6;\r\n                  break;\r\n              case 7:\r\n                  this.selector = this.select7;\r\n                  break;\r\n              default:\r\n                  this.selector = this.select1;\r\n                  break;\r\n          }\r\n\r\n          this.scanComps = this.scan.components;\r\n          this.quantTables = this.quantTable.quantTables;\r\n\r\n          for (i = 0; i < this.numComp; i+=1) {\r\n              compN = this.scanComps[i].scanCompSel;\r\n              this.qTab[i] = this.quantTables[this.components[compN].quantTableSel];\r\n              this.nBlock[i] = this.components[compN].vSamp * this.components[compN].hSamp;\r\n              this.dcTab[i] = this.HuffTab[this.scanComps[i].dcTabSel][0];\r\n              this.acTab[i] = this.HuffTab[this.scanComps[i].acTabSel][1];\r\n          }\r\n\r\n          this.xDim = this.frame.dimX;\r\n          this.yDim = this.frame.dimY;\r\n          if (this.numBytes == 1) {\r\n              this.outputData = new Uint8Array(new ArrayBuffer(this.xDim * this.yDim * this.numBytes * this.numComp));\r\n          } else {\r\n              this.outputData = new Uint16Array(new ArrayBuffer(this.xDim * this.yDim * this.numBytes * this.numComp));\r\n          }\r\n\r\n          scanNum+=1;\r\n\r\n          while (true) { // Decode one scan\r\n              temp[0] = 0;\r\n              index[0] = 0;\r\n\r\n              for (i = 0; i < 10; i+=1) {\r\n                  pred[i] = (1 << (this.precision - 1));\r\n              }\r\n\r\n              if (this.restartInterval === 0) {\r\n                  current = this.decodeUnit(pred, temp, index);\r\n\r\n                  while ((current === 0) && ((this.xLoc < this.xDim) && (this.yLoc < this.yDim))) {\r\n                      this.output(pred);\r\n                      current = this.decodeUnit(pred, temp, index);\r\n                  }\r\n\r\n                  break; //current=MARKER\r\n              }\r\n\r\n              for (mcuNum = 0; mcuNum < this.restartInterval; mcuNum+=1) {\r\n                  this.restarting = (mcuNum == 0);\r\n                  current = this.decodeUnit(pred, temp, index);\r\n                  this.output(pred);\r\n\r\n                  if (current !== 0) {\r\n                      break;\r\n                  }\r\n              }\r\n\r\n              if (current === 0) {\r\n                  if (this.markerIndex !== 0) {\r\n                      current = (0xFF00 | this.marker);\r\n                      this.markerIndex = 0;\r\n                  } else {\r\n                      current = this.stream.get16();\r\n                  }\r\n              }\r\n\r\n              if (!((current >= jpeg.lossless.Decoder.RESTART_MARKER_BEGIN) &&\r\n                  (current <= jpeg.lossless.Decoder.RESTART_MARKER_END))) {\r\n                  break; //current=MARKER\r\n              }\r\n          }\r\n\r\n          if ((current === 0xFFDC) && (scanNum === 1)) { //DNL\r\n              this.readNumber();\r\n              current = this.stream.get16();\r\n          }\r\n      } while ((current !== 0xFFD9) && ((this.xLoc < this.xDim) && (this.yLoc < this.yDim)) && (scanNum === 0));\r\n\r\n      return this.outputData;\r\n  };\r\n\r\n\r\n\r\n  jpeg.lossless.Decoder.prototype.decodeUnit = function (prev, temp, index) {\r\n      if (this.numComp == 1) {\r\n          return this.decodeSingle(prev, temp, index);\r\n      } else if (this.numComp == 3) {\r\n          return this.decodeRGB(prev, temp, index);\r\n      } else {\r\n          return -1;\r\n      }\r\n  };\r\n\r\n\r\n\r\n  jpeg.lossless.Decoder.prototype.select1 = function (compOffset) {\r\n      return this.getPreviousX(compOffset);\r\n  };\r\n\r\n\r\n\r\n  jpeg.lossless.Decoder.prototype.select2 = function (compOffset) {\r\n      return this.getPreviousY(compOffset);\r\n  };\r\n\r\n\r\n\r\n  jpeg.lossless.Decoder.prototype.select3 = function (compOffset) {\r\n      return this.getPreviousXY(compOffset);\r\n  };\r\n\r\n\r\n\r\n  jpeg.lossless.Decoder.prototype.select4 = function (compOffset) {\r\n      return (this.getPreviousX(compOffset) + this.getPreviousY(compOffset)) - this.getPreviousXY(compOffset);\r\n  };\r\n\r\n\r\n\r\n  jpeg.lossless.Decoder.prototype.select5 = function (compOffset) {\r\n      return this.getPreviousX(compOffset) + ((this.getPreviousY(compOffset) - this.getPreviousXY(compOffset)) >> 1);\r\n  };\r\n\r\n\r\n\r\n  jpeg.lossless.Decoder.prototype.select6 = function (compOffset) {\r\n      return this.getPreviousY(compOffset) + ((this.getPreviousX(compOffset) - this.getPreviousXY(compOffset)) >> 1);\r\n  };\r\n\r\n\r\n\r\n  jpeg.lossless.Decoder.prototype.select7 = function (compOffset) {\r\n      return ((this.getPreviousX(compOffset) + this.getPreviousY(compOffset)) / 2);\r\n  };\r\n\r\n\r\n\r\n  jpeg.lossless.Decoder.prototype.decodeRGB = function (prev, temp, index) {\r\n      /*jslint bitwise: true */\r\n\r\n      var value, actab, dctab, qtab, ctrC, i, k, j;\r\n\r\n      prev[0] = this.selector(0);\r\n      prev[1] = this.selector(1);\r\n      prev[2] = this.selector(2);\r\n\r\n      for (ctrC = 0; ctrC < this.numComp; ctrC+=1) {\r\n          qtab = this.qTab[ctrC];\r\n          actab = this.acTab[ctrC];\r\n          dctab = this.dcTab[ctrC];\r\n          for (i = 0; i < this.nBlock[ctrC]; i+=1) {\r\n              for (k = 0; k < this.IDCT_Source.length; k+=1) {\r\n                  this.IDCT_Source[k] = 0;\r\n              }\r\n\r\n              value = this.getHuffmanValue(dctab, temp, index);\r\n\r\n              if (value >= 0xFF00) {\r\n                  return value;\r\n              }\r\n\r\n              prev[ctrC] = this.IDCT_Source[0] = prev[ctrC] + this.getn(index, value, temp, index);\r\n              this.IDCT_Source[0] *= qtab[0];\r\n\r\n              for (j = 1; j < 64; j+=1) {\r\n                  value = this.getHuffmanValue(actab, temp, index);\r\n\r\n                  if (value >= 0xFF00) {\r\n                      return value;\r\n                  }\r\n\r\n                  j += (value >> 4);\r\n\r\n                  if ((value & 0x0F) === 0) {\r\n                      if ((value >> 4) === 0) {\r\n                          break;\r\n                      }\r\n                  } else {\r\n                      this.IDCT_Source[jpeg.lossless.Decoder.IDCT_P[j]] = this.getn(index, value & 0x0F, temp, index) * qtab[j];\r\n                  }\r\n              }\r\n          }\r\n      }\r\n\r\n      return 0;\r\n  };\r\n\r\n\r\n\r\n  jpeg.lossless.Decoder.prototype.decodeSingle = function (prev, temp, index) {\r\n      /*jslint bitwise: true */\r\n\r\n      var value, i, n, nRestart;\r\n\r\n      if (this.restarting) {\r\n          this.restarting = false;\r\n          prev[0] = (1 << (this.frame.precision - 1));\r\n      } else {\r\n          prev[0] = this.selector();\r\n      }\r\n\r\n      for (i = 0; i < this.nBlock[0]; i+=1) {\r\n          value = this.getHuffmanValue(this.dcTab[0], temp, index);\r\n          if (value >= 0xFF00) {\r\n              return value;\r\n          }\r\n\r\n          n = this.getn(prev, value, temp, index);\r\n          nRestart = (n >> 8);\r\n\r\n          if ((nRestart >= jpeg.lossless.Decoder.RESTART_MARKER_BEGIN) && (nRestart <= jpeg.lossless.Decoder.RESTART_MARKER_END)) {\r\n              return nRestart;\r\n          }\r\n\r\n          prev[0] += n;\r\n      }\r\n\r\n      return 0;\r\n  };\r\n\r\n\r\n\r\n  //  Huffman table for fast search: (HuffTab) 8-bit Look up table 2-layer search architecture, 1st-layer represent 256 node (8 bits) if codeword-length > 8\r\n  //  bits, then the entry of 1st-layer = (# of 2nd-layer table) | MSB and it is stored in the 2nd-layer Size of tables in each layer are 256.\r\n  //  HuffTab[*][*][0-256] is always the only 1st-layer table.\r\n  //\r\n  //  An entry can be: (1) (# of 2nd-layer table) | MSB , for code length > 8 in 1st-layer (2) (Code length) << 8 | HuffVal\r\n  //\r\n  //  HuffmanValue(table   HuffTab[x][y] (ex) HuffmanValue(HuffTab[1][0],...)\r\n  //                  ):\r\n  //      return: Huffman Value of table\r\n  //              0xFF?? if it receives a MARKER\r\n  //      Parameter:  table   HuffTab[x][y] (ex) HuffmanValue(HuffTab[1][0],...)\r\n  //                  temp    temp storage for remainded bits\r\n  //                  index   index to bit of temp\r\n  //                  in      FILE pointer\r\n  //      Effect:\r\n  //          temp  store new remainded bits\r\n  //          index change to new index\r\n  //          in    change to new position\r\n  //      NOTE:\r\n  //        Initial by   temp=0; index=0;\r\n  //      NOTE: (explain temp and index)\r\n  //        temp: is always in the form at calling time or returning time\r\n  //         |  byte 4  |  byte 3  |  byte 2  |  byte 1  |\r\n  //         |     0    |     0    | 00000000 | 00000??? |  if not a MARKER\r\n  //                                                 ^index=3 (from 0 to 15)\r\n  //                                                 321\r\n  //      NOTE (marker and marker_index):\r\n  //        If get a MARKER from 'in', marker=the low-byte of the MARKER\r\n  //          and marker_index=9\r\n  //        If marker_index=9 then index is always > 8, or HuffmanValue()\r\n  //          will not be called\r\n  jpeg.lossless.Decoder.prototype.getHuffmanValue = function (table, temp, index) {\r\n      /*jslint bitwise: true */\r\n\r\n      var code, input, mask;\r\n      mask = 0xFFFF;\r\n\r\n      if (index[0] < 8) {\r\n          temp[0] <<= 8;\r\n          input = this.stream.get8();\r\n          if (input === 0xFF) {\r\n              this.marker = this.stream.get8();\r\n              if (this.marker !== 0) {\r\n                  this.markerIndex = 9;\r\n              }\r\n          }\r\n          temp[0] |= input;\r\n      } else {\r\n          index[0] -= 8;\r\n      }\r\n\r\n      code = table[temp[0] >> index[0]];\r\n\r\n      if ((code & jpeg.lossless.Decoder.MSB) !== 0) {\r\n          if (this.markerIndex !== 0) {\r\n              this.markerIndex = 0;\r\n              return 0xFF00 | this.marker;\r\n          }\r\n\r\n          temp[0] &= (mask >> (16 - index[0]));\r\n          temp[0] <<= 8;\r\n          input = this.stream.get8();\r\n\r\n          if (input === 0xFF) {\r\n              this.marker = this.stream.get8();\r\n              if (this.marker !== 0) {\r\n                  this.markerIndex = 9;\r\n              }\r\n          }\r\n\r\n          temp[0] |= input;\r\n          code = table[((code & 0xFF) * 256) + (temp[0] >> index[0])];\r\n          index[0] += 8;\r\n      }\r\n\r\n      index[0] += 8 - (code >> 8);\r\n\r\n      if (index[0] < 0) {\r\n          throw new Error(\"index=\" + index[0] + \" temp=\" + temp[0] + \" code=\" + code + \" in HuffmanValue()\");\r\n      }\r\n\r\n      if (index[0] < this.markerIndex) {\r\n          this.markerIndex = 0;\r\n          return 0xFF00 | this.marker;\r\n      }\r\n\r\n      temp[0] &= (mask >> (16 - index[0]));\r\n      return code & 0xFF;\r\n  };\r\n\r\n\r\n\r\n  jpeg.lossless.Decoder.prototype.getn = function (PRED, n, temp, index) {\r\n      /*jslint bitwise: true */\r\n\r\n      var result, one, n_one, mask, input;\r\n      one = 1;\r\n      n_one = -1;\r\n      mask = 0xFFFF;\r\n\r\n      if (n === 0) {\r\n          return 0;\r\n      }\r\n\r\n      if (n === 16) {\r\n          if (PRED[0] >= 0) {\r\n              return -32768;\r\n          } else {\r\n              return 32768;\r\n          }\r\n      }\r\n\r\n      index[0] -= n;\r\n\r\n      if (index[0] >= 0) {\r\n          if ((index[0] < this.markerIndex) && !this.isLastPixel()) { // this was corrupting the last pixel in some cases\r\n              this.markerIndex = 0;\r\n              return (0xFF00 | this.marker) << 8;\r\n          }\r\n\r\n          result = temp[0] >> index[0];\r\n          temp[0] &= (mask >> (16 - index[0]));\r\n      } else {\r\n          temp[0] <<= 8;\r\n          input = this.stream.get8();\r\n\r\n          if (input === 0xFF) {\r\n              this.marker = this.stream.get8();\r\n              if (this.marker !== 0) {\r\n                  this.markerIndex = 9;\r\n              }\r\n          }\r\n\r\n          temp[0] |= input;\r\n          index[0] += 8;\r\n\r\n          if (index[0] < 0) {\r\n              if (this.markerIndex !== 0) {\r\n                  this.markerIndex = 0;\r\n                  return (0xFF00 | this.marker) << 8;\r\n              }\r\n\r\n              temp[0] <<= 8;\r\n              input = this.stream.get8();\r\n\r\n              if (input === 0xFF) {\r\n                  this.marker = this.stream.get8();\r\n                  if (this.marker !== 0) {\r\n                      this.markerIndex = 9;\r\n                  }\r\n              }\r\n\r\n              temp[0] |= input;\r\n              index[0] += 8;\r\n          }\r\n\r\n          if (index[0] < 0) {\r\n              throw new Error(\"index=\" + index[0] + \" in getn()\");\r\n          }\r\n\r\n          if (index[0] < this.markerIndex) {\r\n              this.markerIndex = 0;\r\n              return (0xFF00 | this.marker) << 8;\r\n          }\r\n\r\n          result = temp[0] >> index[0];\r\n          temp[0] &= (mask >> (16 - index[0]));\r\n      }\r\n\r\n      if (result < (one << (n - 1))) {\r\n          result += (n_one << n) + 1;\r\n      }\r\n\r\n      return result;\r\n  };\r\n\r\n\r\n\r\n  jpeg.lossless.Decoder.prototype.getPreviousX = function (compOffset) {\r\n      /*jslint bitwise: true */\r\n\r\n      if (this.xLoc > 0) {\r\n          return this.getter((((this.yLoc * this.xDim) + this.xLoc) - 1), compOffset);\r\n      } else if (this.yLoc > 0) {\r\n          return this.getPreviousY(compOffset);\r\n      } else {\r\n          return (1 << (this.frame.precision - 1));\r\n      }\r\n  };\r\n\r\n\r\n\r\n  jpeg.lossless.Decoder.prototype.getPreviousXY = function (compOffset) {\r\n      /*jslint bitwise: true */\r\n\r\n      if ((this.xLoc > 0) && (this.yLoc > 0)) {\r\n          return this.getter(((((this.yLoc - 1) * this.xDim) + this.xLoc) - 1), compOffset);\r\n      } else {\r\n          return this.getPreviousY(compOffset);\r\n      }\r\n  };\r\n\r\n\r\n\r\n  jpeg.lossless.Decoder.prototype.getPreviousY = function (compOffset) {\r\n      /*jslint bitwise: true */\r\n\r\n      if (this.yLoc > 0) {\r\n          return this.getter((((this.yLoc - 1) * this.xDim) + this.xLoc), compOffset);\r\n      } else {\r\n          return this.getPreviousX(compOffset);\r\n      }\r\n  };\r\n\r\n\r\n\r\n  jpeg.lossless.Decoder.prototype.isLastPixel = function () {\r\n      return (this.xLoc === (this.xDim - 1)) && (this.yLoc === (this.yDim - 1));\r\n  };\r\n\r\n\r\n\r\n  jpeg.lossless.Decoder.prototype.outputSingle = function (PRED) {\r\n      if ((this.xLoc < this.xDim) && (this.yLoc < this.yDim)) {\r\n          this.setter((((this.yLoc * this.xDim) + this.xLoc)), this.mask & PRED[0]);\r\n\r\n          this.xLoc+=1;\r\n\r\n          if (this.xLoc >= this.xDim) {\r\n              this.yLoc+=1;\r\n              this.xLoc = 0;\r\n          }\r\n      }\r\n  };\r\n\r\n\r\n\r\n  jpeg.lossless.Decoder.prototype.outputRGB = function (PRED) {\r\n      var offset = ((this.yLoc * this.xDim) + this.xLoc);\r\n\r\n      if ((this.xLoc < this.xDim) && (this.yLoc < this.yDim)) {\r\n          this.setter(offset, PRED[0], 0);\r\n          this.setter(offset, PRED[1], 1);\r\n          this.setter(offset, PRED[2], 2);\r\n\r\n          this.xLoc+=1;\r\n\r\n          if (this.xLoc >= this.xDim) {\r\n              this.yLoc+=1;\r\n              this.xLoc = 0;\r\n          }\r\n      }\r\n  };\r\n\r\n  jpeg.lossless.Decoder.prototype.setValue8 = function (index, val) {\r\n      this.outputData[index] = val;\r\n  };\r\n\r\n  jpeg.lossless.Decoder.prototype.getValue8 = function (index) {\r\n      return this.outputData[index]; // mask should not be necessary because outputData is either Int8Array or Int16Array\r\n  };\r\n\r\n  var littleEndian = (function() {\r\n      var buffer = new ArrayBuffer(2);\r\n      new DataView(buffer).setInt16(0, 256, true /* littleEndian */);\r\n      // Int16Array uses the platform's endianness.\r\n      return new Int16Array(buffer)[0] === 256;\r\n  })();\r\n\r\n  if (littleEndian) {\r\n      // just reading from an array is fine then. Int16Array will use platform endianness.\r\n      jpeg.lossless.Decoder.prototype.setValue16 = jpeg.lossless.Decoder.prototype.setValue8;\r\n      jpeg.lossless.Decoder.prototype.getValue16 = jpeg.lossless.Decoder.prototype.getValue8;\r\n  }\r\n  else {\r\n      // If platform is big-endian, we will need to convert to little-endian\r\n      jpeg.lossless.Decoder.prototype.setValue16 = function (index, val) {\r\n          this.outputData[index] = ((val & 0xFF) << 8) | ((val >> 8) & 0xFF);\r\n      };\r\n\r\n      jpeg.lossless.Decoder.prototype.getValue16 = function (index) {\r\n          var val = this.outputData[index];\r\n          return ((val & 0xFF) << 8) | ((val >> 8) & 0xFF);\r\n      };\r\n  }\r\n\r\n  jpeg.lossless.Decoder.prototype.setValueRGB = function (index, val, compOffset) {\r\n      // this.outputData.setUint8(index * 3 + compOffset, val);\r\n      this.outputData[index * 3 + compOffset] = val;\r\n  };\r\n\r\n  jpeg.lossless.Decoder.prototype.getValueRGB = function (index, compOffset) {\r\n      // return this.outputData.getUint8(index * 3 + compOffset);\r\n      return this.outputData[index * 3 + compOffset];\r\n  };\r\n\r\n\r\n\r\n  jpeg.lossless.Decoder.prototype.readApp = function() {\r\n      var count = 0, length = this.stream.get16();\r\n      count += 2;\r\n\r\n      while (count < length) {\r\n          this.stream.get8();\r\n          count+=1;\r\n      }\r\n\r\n      return length;\r\n  };\r\n\r\n\r\n\r\n  jpeg.lossless.Decoder.prototype.readComment = function () {\r\n      var sb = \"\", count = 0, length;\r\n\r\n      length = this.stream.get16();\r\n      count += 2;\r\n\r\n      while (count < length) {\r\n          sb += this.stream.get8();\r\n          count+=1;\r\n      }\r\n\r\n      return sb;\r\n  };\r\n\r\n\r\n\r\n  jpeg.lossless.Decoder.prototype.readNumber = function() {\r\n      var Ld = this.stream.get16();\r\n\r\n      if (Ld !== 4) {\r\n          throw new Error(\"ERROR: Define number format throw new IOException [Ld!=4]\");\r\n      }\r\n\r\n      return this.stream.get16();\r\n  };\r\n\r\n\r\n\r\n  /*** Exports ***/\r\n\r\n  var moduleType = typeof module;\r\n  if ((moduleType !== 'undefined') && module.exports) {\r\n      module.exports = jpeg.lossless.Decoder;\r\n  }\r\n\r\n  },{\"./data-stream.js\":2,\"./frame-header.js\":4,\"./huffman-table.js\":5,\"./quantization-table.js\":7,\"./scan-header.js\":9,\"./utils.js\":10}],4:[function(require,module,exports){\r\n  /*\r\n   * Copyright (C) 2015 Michael Martinez\r\n   * Changes: Added support for selection values 2-7, fixed minor bugs &\r\n   * warnings, split into multiple class files, and general clean up.\r\n   *\r\n   * 08-25-2015: Helmut Dersch agreed to a license change from LGPL to MIT.\r\n   */\r\n\r\n  /*\r\n   * Copyright (C) Helmut Dersch\r\n   *\r\n   * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n   * of this software and associated documentation files (the \"Software\"), to deal\r\n   * in the Software without restriction, including without limitation the rights\r\n   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n   * copies of the Software, and to permit persons to whom the Software is\r\n   * furnished to do so, subject to the following conditions:\r\n\r\n   * The above copyright notice and this permission notice shall be included in\r\n   * all copies or substantial portions of the Software.\r\n\r\n   * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n   * THE SOFTWARE.\r\n   */\r\n\r\n  /*jslint browser: true, node: true */\r\n  /*global require, module */\r\n\r\n  \"use strict\";\r\n\r\n  /*** Imports ***/\r\n  var jpeg = jpeg || {};\r\n  jpeg.lossless = jpeg.lossless || {};\r\n  jpeg.lossless.ComponentSpec = jpeg.lossless.ComponentSpec || ((typeof require !== 'undefined') ? require('./component-spec.js') : null);\r\n  jpeg.lossless.DataStream = jpeg.lossless.DataStream || ((typeof require !== 'undefined') ? require('./data-stream.js') : null);\r\n\r\n\r\n  /*** Constructor ***/\r\n  jpeg.lossless.FrameHeader = jpeg.lossless.FrameHeader || function () {\r\n      this.components = []; // Components\r\n      this.dimX = 0; // Number of samples per line\r\n      this.dimY = 0; // Number of lines\r\n      this.numComp = 0; // Number of component in the frame\r\n      this.precision = 0; // Sample Precision (from the original image)\r\n  };\r\n\r\n\r\n\r\n  /*** Prototype Methods ***/\r\n\r\n  jpeg.lossless.FrameHeader.prototype.read = function (data) {\r\n      /*jslint bitwise: true */\r\n\r\n      var count = 0, length, i, c, temp;\r\n\r\n      length = data.get16();\r\n      count += 2;\r\n\r\n      this.precision = data.get8();\r\n      count+=1;\r\n\r\n      this.dimY = data.get16();\r\n      count += 2;\r\n\r\n      this.dimX = data.get16();\r\n      count += 2;\r\n\r\n      this.numComp = data.get8();\r\n      count+=1;\r\n      for (i = 1; i <= this.numComp; i+=1) {\r\n          if (count > length) {\r\n              throw new Error(\"ERROR: frame format error\");\r\n          }\r\n\r\n          c = data.get8();\r\n          count+=1;\r\n\r\n          if (count >= length) {\r\n              throw new Error(\"ERROR: frame format error [c>=Lf]\");\r\n          }\r\n\r\n          temp = data.get8();\r\n          count+=1;\r\n\r\n          if (!this.components[c]) {\r\n              this.components[c] = new jpeg.lossless.ComponentSpec();\r\n          }\r\n\r\n          this.components[c].hSamp = temp >> 4;\r\n          this.components[c].vSamp = temp & 0x0F;\r\n          this.components[c].quantTableSel = data.get8();\r\n          count+=1;\r\n      }\r\n\r\n      if (count !== length) {\r\n          throw new Error(\"ERROR: frame format error [Lf!=count]\");\r\n      }\r\n\r\n      return 1;\r\n  };\r\n\r\n\r\n  /*** Exports ***/\r\n\r\n  var moduleType = typeof module;\r\n  if ((moduleType !== 'undefined') && module.exports) {\r\n      module.exports = jpeg.lossless.FrameHeader;\r\n  }\r\n\r\n  },{\"./component-spec.js\":1,\"./data-stream.js\":2}],5:[function(require,module,exports){\r\n  /*\r\n   * Copyright (C) 2015 Michael Martinez\r\n   * Changes: Added support for selection values 2-7, fixed minor bugs &\r\n   * warnings, split into multiple class files, and general clean up.\r\n   *\r\n   * 08-25-2015: Helmut Dersch agreed to a license change from LGPL to MIT.\r\n   */\r\n\r\n  /*\r\n   * Copyright (C) Helmut Dersch\r\n   *\r\n   * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n   * of this software and associated documentation files (the \"Software\"), to deal\r\n   * in the Software without restriction, including without limitation the rights\r\n   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n   * copies of the Software, and to permit persons to whom the Software is\r\n   * furnished to do so, subject to the following conditions:\r\n\r\n   * The above copyright notice and this permission notice shall be included in\r\n   * all copies or substantial portions of the Software.\r\n\r\n   * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n   * THE SOFTWARE.\r\n   */\r\n\r\n  /*jslint browser: true, node: true */\r\n  /*global require, module */\r\n\r\n  \"use strict\";\r\n\r\n  /*** Imports ***/\r\n  var jpeg = jpeg || {};\r\n  jpeg.lossless = jpeg.lossless || {};\r\n  jpeg.lossless.DataStream = jpeg.lossless.DataStream || ((typeof require !== 'undefined') ? require('./data-stream.js') : null);\r\n  jpeg.lossless.Utils = jpeg.lossless.Utils || ((typeof require !== 'undefined') ? require('./utils.js') : null);\r\n\r\n\r\n  /*** Constructor ***/\r\n  jpeg.lossless.HuffmanTable = jpeg.lossless.HuffmanTable || function () {\r\n      this.l = jpeg.lossless.Utils.createArray(4, 2, 16);\r\n      this.th = [];\r\n      this.v = jpeg.lossless.Utils.createArray(4, 2, 16, 200);\r\n      this.tc = jpeg.lossless.Utils.createArray(4, 2);\r\n\r\n      this.tc[0][0] = 0;\r\n      this.tc[1][0] = 0;\r\n      this.tc[2][0] = 0;\r\n      this.tc[3][0] = 0;\r\n      this.tc[0][1] = 0;\r\n      this.tc[1][1] = 0;\r\n      this.tc[2][1] = 0;\r\n      this.tc[3][1] = 0;\r\n      this.th[0] = 0;\r\n      this.th[1] = 0;\r\n      this.th[2] = 0;\r\n      this.th[3] = 0;\r\n  };\r\n\r\n\r\n\r\n  /*** Static Pseudo-constants ***/\r\n\r\n  jpeg.lossless.HuffmanTable.MSB = 0x80000000;\r\n\r\n\r\n  /*** Prototype Methods ***/\r\n\r\n  jpeg.lossless.HuffmanTable.prototype.read = function(data, HuffTab) {\r\n      /*jslint bitwise: true */\r\n\r\n      var count = 0, length, temp, t, c, i, j;\r\n\r\n      length = data.get16();\r\n      count += 2;\r\n\r\n      while (count < length) {\r\n          temp = data.get8();\r\n          count+=1;\r\n          t = temp & 0x0F;\r\n          if (t > 3) {\r\n              throw new Error(\"ERROR: Huffman table ID > 3\");\r\n          }\r\n\r\n          c = temp >> 4;\r\n          if (c > 2) {\r\n              throw new Error(\"ERROR: Huffman table [Table class > 2 ]\");\r\n          }\r\n\r\n          this.th[t] = 1;\r\n          this.tc[t][c] = 1;\r\n\r\n          for (i = 0; i < 16; i+=1) {\r\n              this.l[t][c][i] = data.get8();\r\n              count+=1;\r\n          }\r\n\r\n          for (i = 0; i < 16; i+=1) {\r\n              for (j = 0; j < this.l[t][c][i]; j+=1) {\r\n                  if (count > length) {\r\n                      throw new Error(\"ERROR: Huffman table format error [count>Lh]\");\r\n                  }\r\n\r\n                  this.v[t][c][i][j] = data.get8();\r\n                  count+=1;\r\n              }\r\n          }\r\n      }\r\n\r\n      if (count !== length) {\r\n          throw new Error(\"ERROR: Huffman table format error [count!=Lf]\");\r\n      }\r\n\r\n      for (i = 0; i < 4; i+=1) {\r\n          for (j = 0; j < 2; j+=1) {\r\n              if (this.tc[i][j] !== 0) {\r\n                  this.buildHuffTable(HuffTab[i][j], this.l[i][j], this.v[i][j]);\r\n              }\r\n          }\r\n      }\r\n\r\n      return 1;\r\n  };\r\n\r\n\r\n\r\n  //  Build_HuffTab()\r\n  //  Parameter:  t       table ID\r\n  //              c       table class ( 0 for DC, 1 for AC )\r\n  //              L[i]    # of codewords which length is i\r\n  //              V[i][j] Huffman Value (length=i)\r\n  //  Effect:\r\n  //      build up HuffTab[t][c] using L and V.\r\n  jpeg.lossless.HuffmanTable.prototype.buildHuffTable = function(tab, L, V) {\r\n      /*jslint bitwise: true */\r\n\r\n      var currentTable, temp, k, i, j, n;\r\n      temp = 256;\r\n      k = 0;\r\n\r\n      for (i = 0; i < 8; i+=1) { // i+1 is Code length\r\n          for (j = 0; j < L[i]; j+=1) {\r\n              for (n = 0; n < (temp >> (i + 1)); n+=1) {\r\n                  tab[k] = V[i][j] | ((i + 1) << 8);\r\n                  k+=1;\r\n              }\r\n          }\r\n      }\r\n\r\n      for (i = 1; k < 256; i+=1, k+=1) {\r\n          tab[k] = i | jpeg.lossless.HuffmanTable.MSB;\r\n      }\r\n\r\n      currentTable = 1;\r\n      k = 0;\r\n\r\n      for (i = 8; i < 16; i+=1) { // i+1 is Code length\r\n          for (j = 0; j < L[i]; j+=1) {\r\n              for (n = 0; n < (temp >> (i - 7)); n+=1) {\r\n                  tab[(currentTable * 256) + k] = V[i][j] | ((i + 1) << 8);\r\n                  k+=1;\r\n              }\r\n\r\n              if (k >= 256) {\r\n                  if (k > 256) {\r\n                      throw new Error(\"ERROR: Huffman table error(1)!\");\r\n                  }\r\n\r\n                  k = 0;\r\n                  currentTable+=1;\r\n              }\r\n          }\r\n      }\r\n  };\r\n\r\n\r\n  /*** Exports ***/\r\n\r\n  var moduleType = typeof module;\r\n  if ((moduleType !== 'undefined') && module.exports) {\r\n      module.exports = jpeg.lossless.HuffmanTable;\r\n  }\r\n\r\n  },{\"./data-stream.js\":2,\"./utils.js\":10}],6:[function(require,module,exports){\r\n  /*jslint browser: true, node: true */\r\n  /*global require, module */\r\n\r\n  \"use strict\";\r\n\r\n  /*** Imports ****/\r\n\r\n  /**\r\n   * jpeg\r\n    * @type {*|{}}\r\n   */\r\n  var jpeg = jpeg || {};\r\n\r\n  /**\r\n   * jpeg.lossless\r\n   * @type {*|{}}\r\n   */\r\n  jpeg.lossless = jpeg.lossless || {};\r\n\r\n\r\n  jpeg.lossless.ComponentSpec = jpeg.lossless.ComponentSpec || ((typeof require !== 'undefined') ? require('./component-spec.js') : null);\r\n  jpeg.lossless.DataStream = jpeg.lossless.DataStream || ((typeof require !== 'undefined') ? require('./data-stream.js') : null);\r\n  jpeg.lossless.Decoder = jpeg.lossless.Decoder || ((typeof require !== 'undefined') ? require('./decoder.js') : null);\r\n  jpeg.lossless.FrameHeader = jpeg.lossless.FrameHeader || ((typeof require !== 'undefined') ? require('./frame-header.js') : null);\r\n  jpeg.lossless.HuffmanTable = jpeg.lossless.HuffmanTable || ((typeof require !== 'undefined') ? require('./huffman-table.js') : null);\r\n  jpeg.lossless.QuantizationTable = jpeg.lossless.QuantizationTable || ((typeof require !== 'undefined') ? require('./quantization-table.js') : null);\r\n  jpeg.lossless.ScanComponent = jpeg.lossless.ScanComponent || ((typeof require !== 'undefined') ? require('./scan-component.js') : null);\r\n  jpeg.lossless.ScanHeader = jpeg.lossless.ScanHeader || ((typeof require !== 'undefined') ? require('./scan-header.js') : null);\r\n  jpeg.lossless.Utils = jpeg.lossless.Utils || ((typeof require !== 'undefined') ? require('./utils.js') : null);\r\n\r\n\r\n  /*** Exports ***/\r\n  var moduleType = typeof module;\r\n  if ((moduleType !== 'undefined') && module.exports) {\r\n      module.exports = jpeg;\r\n  }\r\n\r\n  },{\"./component-spec.js\":1,\"./data-stream.js\":2,\"./decoder.js\":3,\"./frame-header.js\":4,\"./huffman-table.js\":5,\"./quantization-table.js\":7,\"./scan-component.js\":8,\"./scan-header.js\":9,\"./utils.js\":10}],7:[function(require,module,exports){\r\n  /*\r\n   * Copyright (C) 2015 Michael Martinez\r\n   * Changes: Added support for selection values 2-7, fixed minor bugs &\r\n   * warnings, split into multiple class files, and general clean up.\r\n   *\r\n   * 08-25-2015: Helmut Dersch agreed to a license change from LGPL to MIT.\r\n   */\r\n\r\n  /*\r\n   * Copyright (C) Helmut Dersch\r\n   *\r\n   * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n   * of this software and associated documentation files (the \"Software\"), to deal\r\n   * in the Software without restriction, including without limitation the rights\r\n   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n   * copies of the Software, and to permit persons to whom the Software is\r\n   * furnished to do so, subject to the following conditions:\r\n\r\n   * The above copyright notice and this permission notice shall be included in\r\n   * all copies or substantial portions of the Software.\r\n\r\n   * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n   * THE SOFTWARE.\r\n   */\r\n\r\n  /*jslint browser: true, node: true */\r\n  /*global require, module */\r\n\r\n  \"use strict\";\r\n\r\n  /*** Imports ***/\r\n  var jpeg = jpeg || {};\r\n  jpeg.lossless = jpeg.lossless || {};\r\n  jpeg.lossless.DataStream = jpeg.lossless.DataStream || ((typeof require !== 'undefined') ? require('./data-stream.js') : null);\r\n  jpeg.lossless.Utils = jpeg.lossless.Utils || ((typeof require !== 'undefined') ? require('./utils.js') : null);\r\n\r\n\r\n  /*** Constructor ***/\r\n  jpeg.lossless.QuantizationTable = jpeg.lossless.QuantizationTable || function () {\r\n      this.precision = []; // Quantization precision 8 or 16\r\n      this.tq = []; // 1: this table is presented\r\n      this.quantTables = jpeg.lossless.Utils.createArray(4, 64); // Tables\r\n\r\n      this.tq[0] = 0;\r\n      this.tq[1] = 0;\r\n      this.tq[2] = 0;\r\n      this.tq[3] = 0;\r\n  };\r\n\r\n\r\n\r\n  /*** Static Methods ***/\r\n\r\n  jpeg.lossless.QuantizationTable.enhanceQuantizationTable = function(qtab, table) {\r\n      /*jslint bitwise: true */\r\n\r\n      var i;\r\n\r\n      for (i = 0; i < 8; i+=1) {\r\n          qtab[table[(0 * 8) + i]] *= 90;\r\n          qtab[table[(4 * 8) + i]] *= 90;\r\n          qtab[table[(2 * 8) + i]] *= 118;\r\n          qtab[table[(6 * 8) + i]] *= 49;\r\n          qtab[table[(5 * 8) + i]] *= 71;\r\n          qtab[table[(1 * 8) + i]] *= 126;\r\n          qtab[table[(7 * 8) + i]] *= 25;\r\n          qtab[table[(3 * 8) + i]] *= 106;\r\n      }\r\n\r\n      for (i = 0; i < 8; i+=1) {\r\n          qtab[table[0 + (8 * i)]] *= 90;\r\n          qtab[table[4 + (8 * i)]] *= 90;\r\n          qtab[table[2 + (8 * i)]] *= 118;\r\n          qtab[table[6 + (8 * i)]] *= 49;\r\n          qtab[table[5 + (8 * i)]] *= 71;\r\n          qtab[table[1 + (8 * i)]] *= 126;\r\n          qtab[table[7 + (8 * i)]] *= 25;\r\n          qtab[table[3 + (8 * i)]] *= 106;\r\n      }\r\n\r\n      for (i = 0; i < 64; i+=1) {\r\n          qtab[i] >>= 6;\r\n      }\r\n  };\r\n\r\n\r\n  /*** Prototype Methods ***/\r\n\r\n  jpeg.lossless.QuantizationTable.prototype.read = function (data, table) {\r\n      /*jslint bitwise: true */\r\n\r\n      var count = 0, length, temp, t, i;\r\n\r\n      length = data.get16();\r\n      count += 2;\r\n\r\n      while (count < length) {\r\n          temp = data.get8();\r\n          count+=1;\r\n          t = temp & 0x0F;\r\n\r\n          if (t > 3) {\r\n              throw new Error(\"ERROR: Quantization table ID > 3\");\r\n          }\r\n\r\n          this.precision[t] = temp >> 4;\r\n\r\n          if (this.precision[t] === 0) {\r\n              this.precision[t] = 8;\r\n          } else if (this.precision[t] === 1) {\r\n              this.precision[t] = 16;\r\n          } else {\r\n              throw new Error(\"ERROR: Quantization table precision error\");\r\n          }\r\n\r\n          this.tq[t] = 1;\r\n\r\n          if (this.precision[t] === 8) {\r\n              for (i = 0; i < 64; i+=1) {\r\n                  if (count > length) {\r\n                      throw new Error(\"ERROR: Quantization table format error\");\r\n                  }\r\n\r\n                  this.quantTables[t][i] = data.get8();\r\n                  count+=1;\r\n              }\r\n\r\n              jpeg.lossless.QuantizationTable.enhanceQuantizationTable(this.quantTables[t], table);\r\n          } else {\r\n              for (i = 0; i < 64; i+=1) {\r\n                  if (count > length) {\r\n                      throw new Error(\"ERROR: Quantization table format error\");\r\n                  }\r\n\r\n                  this.quantTables[t][i] = data.get16();\r\n                  count += 2;\r\n              }\r\n\r\n              jpeg.lossless.QuantizationTable.enhanceQuantizationTable(this.quantTables[t], table);\r\n          }\r\n      }\r\n\r\n      if (count !== length) {\r\n          throw new Error(\"ERROR: Quantization table error [count!=Lq]\");\r\n      }\r\n\r\n      return 1;\r\n  };\r\n\r\n\r\n\r\n  /*** Exports ***/\r\n\r\n  var moduleType = typeof module;\r\n  if ((moduleType !== 'undefined') && module.exports) {\r\n      module.exports = jpeg.lossless.QuantizationTable;\r\n  }\r\n\r\n  },{\"./data-stream.js\":2,\"./utils.js\":10}],8:[function(require,module,exports){\r\n  /*\r\n   * Copyright (C) 2015 Michael Martinez\r\n   * Changes: Added support for selection values 2-7, fixed minor bugs &\r\n   * warnings, split into multiple class files, and general clean up.\r\n   *\r\n   * 08-25-2015: Helmut Dersch agreed to a license change from LGPL to MIT.\r\n   */\r\n\r\n  /*\r\n   * Copyright (C) Helmut Dersch\r\n   *\r\n   * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n   * of this software and associated documentation files (the \"Software\"), to deal\r\n   * in the Software without restriction, including without limitation the rights\r\n   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n   * copies of the Software, and to permit persons to whom the Software is\r\n   * furnished to do so, subject to the following conditions:\r\n\r\n   * The above copyright notice and this permission notice shall be included in\r\n   * all copies or substantial portions of the Software.\r\n\r\n   * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n   * THE SOFTWARE.\r\n   */\r\n\r\n  /*jslint browser: true, node: true */\r\n  /*global require, module */\r\n\r\n  \"use strict\";\r\n\r\n  /*** Imports ***/\r\n  var jpeg = jpeg || {};\r\n  jpeg.lossless = jpeg.lossless || {};\r\n\r\n\r\n  /*** Constructor ***/\r\n  jpeg.lossless.ScanComponent = jpeg.lossless.ScanComponent || function () {\r\n      this.acTabSel = 0; // AC table selector\r\n      this.dcTabSel = 0; // DC table selector\r\n      this.scanCompSel = 0; // Scan component selector\r\n  };\r\n\r\n\r\n\r\n  /*** Exports ***/\r\n\r\n  var moduleType = typeof module;\r\n  if ((moduleType !== 'undefined') && module.exports) {\r\n      module.exports = jpeg.lossless.ScanComponent;\r\n  }\r\n\r\n  },{}],9:[function(require,module,exports){\r\n  /*\r\n   * Copyright (C) 2015 Michael Martinez\r\n   * Changes: Added support for selection values 2-7, fixed minor bugs &\r\n   * warnings, split into multiple class files, and general clean up.\r\n   *\r\n   * 08-25-2015: Helmut Dersch agreed to a license change from LGPL to MIT.\r\n   */\r\n\r\n  /*\r\n   * Copyright (C) Helmut Dersch\r\n   *\r\n   * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n   * of this software and associated documentation files (the \"Software\"), to deal\r\n   * in the Software without restriction, including without limitation the rights\r\n   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n   * copies of the Software, and to permit persons to whom the Software is\r\n   * furnished to do so, subject to the following conditions:\r\n\r\n   * The above copyright notice and this permission notice shall be included in\r\n   * all copies or substantial portions of the Software.\r\n\r\n   * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n   * THE SOFTWARE.\r\n   */\r\n\r\n  /*jslint browser: true, node: true */\r\n  /*global require, module */\r\n\r\n  \"use strict\";\r\n\r\n  /*** Imports ***/\r\n  var jpeg = jpeg || {};\r\n  jpeg.lossless = jpeg.lossless || {};\r\n  jpeg.lossless.DataStream = jpeg.lossless.DataStream || ((typeof require !== 'undefined') ? require('./data-stream.js') : null);\r\n  jpeg.lossless.ScanComponent = jpeg.lossless.ScanComponent || ((typeof require !== 'undefined') ? require('./scan-component.js') : null);\r\n\r\n\r\n  /*** Constructor ***/\r\n  jpeg.lossless.ScanHeader = jpeg.lossless.ScanHeader || function () {\r\n      this.ah = 0;\r\n      this.al = 0;\r\n      this.numComp = 0; // Number of components in the scan\r\n      this.selection = 0; // Start of spectral or predictor selection\r\n      this.spectralEnd = 0; // End of spectral selection\r\n      this.components = [];\r\n  };\r\n\r\n\r\n  /*** Prototype Methods ***/\r\n\r\n  jpeg.lossless.ScanHeader.prototype.read = function(data) {\r\n      /*jslint bitwise: true */\r\n\r\n      var count = 0, length, i, temp;\r\n\r\n      length = data.get16();\r\n      count += 2;\r\n\r\n      this.numComp = data.get8();\r\n      count+=1;\r\n\r\n      for (i = 0; i < this.numComp; i+=1) {\r\n          this.components[i] = new jpeg.lossless.ScanComponent();\r\n\r\n          if (count > length) {\r\n              throw new Error(\"ERROR: scan header format error\");\r\n          }\r\n\r\n          this.components[i].scanCompSel = data.get8();\r\n          count+=1;\r\n\r\n          temp = data.get8();\r\n          count+=1;\r\n\r\n          this.components[i].dcTabSel = (temp >> 4);\r\n          this.components[i].acTabSel = (temp & 0x0F);\r\n      }\r\n\r\n      this.selection = data.get8();\r\n      count+=1;\r\n\r\n      this.spectralEnd = data.get8();\r\n      count+=1;\r\n\r\n      temp = data.get8();\r\n      this.ah = (temp >> 4);\r\n      this.al = (temp & 0x0F);\r\n      count+=1;\r\n\r\n      if (count !== length) {\r\n          throw new Error(\"ERROR: scan header format error [count!=Ns]\");\r\n      }\r\n\r\n      return 1;\r\n  };\r\n\r\n\r\n\r\n  /*** Exports ***/\r\n\r\n  var moduleType = typeof module;\r\n  if ((moduleType !== 'undefined') && module.exports) {\r\n      module.exports = jpeg.lossless.ScanHeader;\r\n  }\r\n\r\n  },{\"./data-stream.js\":2,\"./scan-component.js\":8}],10:[function(require,module,exports){\r\n  /*\r\n   * Copyright (C) 2015 Michael Martinez\r\n   * Changes: Added support for selection values 2-7, fixed minor bugs &\r\n   * warnings, split into multiple class files, and general clean up.\r\n   *\r\n   * 08-25-2015: Helmut Dersch agreed to a license change from LGPL to MIT.\r\n   */\r\n\r\n  /*\r\n   * Copyright (C) Helmut Dersch\r\n   *\r\n   * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n   * of this software and associated documentation files (the \"Software\"), to deal\r\n   * in the Software without restriction, including without limitation the rights\r\n   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n   * copies of the Software, and to permit persons to whom the Software is\r\n   * furnished to do so, subject to the following conditions:\r\n\r\n   * The above copyright notice and this permission notice shall be included in\r\n   * all copies or substantial portions of the Software.\r\n\r\n   * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n   * THE SOFTWARE.\r\n   */\r\n\r\n  /*jslint browser: true, node: true */\r\n  /*global require, module */\r\n\r\n  \"use strict\";\r\n\r\n  /*** Imports ***/\r\n  var jpeg = jpeg || {};\r\n  jpeg.lossless = jpeg.lossless || {};\r\n\r\n\r\n  /*** Constructor ***/\r\n  jpeg.lossless.Utils = jpeg.lossless.Utils || {};\r\n\r\n\r\n  /*** Static methods ***/\r\n\r\n  // http://stackoverflow.com/questions/966225/how-can-i-create-a-two-dimensional-array-in-javascript\r\n  jpeg.lossless.Utils.createArray = function (length) {\r\n      var arr = new Array(length || 0),\r\n          i = length;\r\n\r\n      if (arguments.length > 1) {\r\n          var args = Array.prototype.slice.call(arguments, 1);\r\n          while(i--) arr[length-1 - i] = jpeg.lossless.Utils.createArray.apply(this, args);\r\n      }\r\n\r\n      return arr;\r\n  };\r\n\r\n\r\n  // http://stackoverflow.com/questions/18638900/javascript-crc32\r\n  jpeg.lossless.Utils.makeCRCTable = function(){\r\n      var c;\r\n      var crcTable = [];\r\n      for(var n =0; n < 256; n++){\r\n          c = n;\r\n          for(var k =0; k < 8; k++){\r\n              c = ((c&1) ? (0xEDB88320 ^ (c >>> 1)) : (c >>> 1));\r\n          }\r\n          crcTable[n] = c;\r\n      }\r\n      return crcTable;\r\n  };\r\n\r\n  jpeg.lossless.Utils.crc32 = function(dataView) {\r\n      var uint8view = new Uint8Array(dataView.buffer);\r\n      var crcTable = jpeg.lossless.Utils.crcTable || (jpeg.lossless.Utils.crcTable = jpeg.lossless.Utils.makeCRCTable());\r\n      var crc = 0 ^ (-1);\r\n\r\n      for (var i = 0; i < uint8view.length; i++ ) {\r\n          crc = (crc >>> 8) ^ crcTable[(crc ^ uint8view[i]) & 0xFF];\r\n      }\r\n\r\n      return (crc ^ (-1)) >>> 0;\r\n  };\r\n\r\n\r\n  /*** Exports ***/\r\n\r\n  var moduleType = typeof module;\r\n  if ((moduleType !== 'undefined') && module.exports) {\r\n      module.exports = jpeg.lossless.Utils;\r\n  }\r\n\r\n},{}]},{},[6])(6)\r\n});\r\n"],"names":["f","exports","module","define","amd","window","global","self","this","jpeg","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","lossless","ComponentSpec","hSamp","quantTableSel","vSamp","DataStream","data","offset","buffer","Uint8Array","index","prototype","get16","value","get8","HuffmanTable","QuantizationTable","ScanHeader","FrameHeader","Utils","Decoder","numBytes","frame","huffTable","quantTable","scan","DU","createArray","HuffTab","IDCT_Source","nBlock","acTab","dcTab","qTab","marker","markerIndex","numComp","restartInterval","selection","xDim","yDim","xLoc","yLoc","outputData","restarting","mask","IDCT_P","TABLE","MAX_HUFFMAN_SUBTREE","MSB","RESTART_MARKER_BEGIN","RESTART_MARKER_END","decompress","decode","current","compN","mcuNum","scanNum","pred","temp","stream","read","readNumber","readApp","readComment","precision","components","parseInt","Math","ceil","getter","getValueRGB","setter","setValueRGB","output","outputRGB","getValue8","setValue8","outputSingle","getValue16","setValue16","selector","select2","select3","select4","select5","select6","select7","select1","scanComps","quantTables","scanCompSel","dcTabSel","acTabSel","dimX","dimY","ArrayBuffer","Uint16Array","decodeUnit","prev","decodeSingle","decodeRGB","compOffset","getPreviousX","getPreviousY","getPreviousXY","actab","dctab","qtab","ctrC","k","j","getHuffmanValue","getn","nRestart","table","input","PRED","result","isLastPixel","val","DataView","setInt16","Int16Array","count","sb","c","th","v","tc","buildHuffTable","tab","L","V","currentTable","ScanComponent","tq","enhanceQuantizationTable","ah","al","spectralEnd","arr","Array","arguments","args","slice","apply","makeCRCTable","crcTable","crc32","dataView","uint8view","crc"],"sourceRoot":""}